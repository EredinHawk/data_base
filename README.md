# Проектирование базы данных

### Цель
Спроектировать базу данных существующего проекта (Aviasales — сервис для покупки дешевых авиабилетов) и реализовать REST API для работы с данными.

### Задачи
    1. Определить основные сущности
    2. Составить модель базы данных с использованием UML
    3. Развернуть локальный сервер PostgreSQL
    4. Спроектировать БД
    5. Определить конечные точки API
    6. Реализовать CRUD

## Реализация

### 1. Определение сущностей

Моделирование БД состоит из множетства этапов, первый из которых - это опеределить сущности исходя из бизнес требований заказчика. Это буквально диалог с клиентом, во время которого изучается технические и логические аспекты отрасли. Если требуется разработать продукт для финансовой компании, то сущности будут примерно такими:

1. Счет
2. Транзакция
3. Заем
4. и т.п.

Рассмотрим этот этап проектирования в контексте нашей задачи:

![alt text](/img/Блоки.png)

При поиске авиабилетов видим блоки с информацие об авиарейсах. Сымитируем упрощенные требования заказчика:

- Результат поиска авиабилетов должен быть оформлен в виде блоков.
- В каждом блоке должны быть указаны:

```bash
    Город вылета
    Город назначения
    Время вылета
    Время прилета в пункт назначения
    Стоимость авиабилета
    Расчетное время полета
    Авиакомпания, обслуживающая авиаперелет
```

Пока остановимся на этом и выделим сущности из требований:

#### 1. Аэропорт

    a_id      - уникальный идентификатор аэропорта
    a_name    - название аэропорта
    a_city_id - город базирования аэропорта

#### 2. Город

    c_id   - уникальный идентификатор города
    c_name - название города
    c_time - часовой пояс (важно при расчете времени прибытия)

#### 3. Авиакомпания

    a_id   - уникальный идентификатор авиакомпании
    a_name - название авиакомпании

#### 4. Маршрут

    r_id             - уникальный идентификатор машрута
    r_airport_depart - город отправления
    r_airport_dest   - город назначения
    r_way            - время в пути

#### 5. Рейс

    f_id                - уникальный идентификатор рейса
    f_number            - номер рейса (например SU 202)
    f_airline_id        - id авиакомпании которая обслуживает рейс
    f_route             - маршрут следования
    f_time              - дата и время начала рейса
    f_cost              - стоимость рейса на 1 эконом место

Список можно продолжать бесконечно. Конечно хочется учесть все параметры, но на данном этапе ключевая задача понять принцип проектирования БД.

### 2. Составление модели

Теперь отобразим сущности в статической UML диаграмме.

![alt text](/img/БД.png)

Связующие ключи, индексы и уникальность полей в объектах UML диаграммы принято отображать как методы, потому что в контексте СУБД определить, к примеру, ключ - это процесс.




